<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Prntr</title>
  <script type="module" src="/dist/prntr.esm.js"></script>
  <script nomodule src="/dist/prntr.cjs.js"></script>
  <script type="text/javascript">
    function onLoadingStart() {
      document.querySelector('.loader').classList.add('is--shown')
    }

    function onLoadingEnd() {
      document.querySelector('.loader').classList.remove('is--shown')
    }

    function printPdf() {
      prntr({
        printable: '/test.pdf',
        onLoadingStart,
        onLoadingEnd,
        type: 'pdf'
      })
    }

    function printPdfBase64() {
      fetch('/base64.txt').then(function (response) {
        response.text().then(function (base64) {
          prntr({
            printable: base64,
            type: 'pdf',
            base64: true,
            onLoadingStart,
            onLoadingEnd,
          })
        })
      })
    }

    function printHtml() {
      prntr({
        printable: 'test',
        type: 'html'
      })
    }

    function printRawHtml() {
      prntr({
        printable: `<h1>Prntr Raw HTML Print Test</h1>
      <p class="blueText">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
      <p>sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>`,
        type: 'raw-html',
        style: '.blueText {color:blue;}'
      })
    }

    function printHtmlCustomStyle() {
      const style = '@page { margin-top: 400px } @media print { h1 { color: blue } }'

      prntr({
        printable: 'test',
        type: 'html',
        style: style,
        scanStyles: false
      })
    }

    function printHtmlCss() {
      prntr({
        printable: 'test',
        type: 'html',
        css: '/test.css',
        scanStyles: false
      })
    }

    function prntron() {
      let data = []
      for (let i = 0; i <= 1000; i++) {
        data.push({
          test1: createRandomString(),
          test2: createRandomString()
        })
      }

      prntr({
        printable: data,
        properties: [
          {
            field: 'test1',
            displayName: 'test 1',
            columnSize: 1
          },
          {
            field: 'test2',
            displayName: 'test 2',
            columnSize: 4
          }
        ],
        type: 'json',
        header: 'JSON Print Test',
        documentTitle: 'Prntr JSON Test'
      })
    }

    function printStyledJson() {
      let data = [
        {
          test1: 'Test1 string',
          test2: 'Test2 string'
        },
        {
          test1: 'more Test1 string',
          test2: 'more Test2 string'
        }
      ]

      prntr({
        printable: data,
        properties: ['test1', 'test2'],
        type: 'json',
        gridStyle: 'border: 2px solid #3971A5;',
        gridHeaderStyle: 'color: red;  border: 2px solid #3971A5;',
      })
    }

    function printNestedJson() {
      let data = []
      for (let i = 0; i <= 100; i++) {
        data.push({
          test1: createRandomString(),
          test2: {
            a: createRandomString()
          }
        })
      }

      prntr({
        printable: data,
        properties: [
          {
            field: 'test1',
            displayName: 'test 1',
            columnSize: 1
          },
          {
            field: 'test2.a',
            displayName: 'test 2 - a',
            columnSize: 4
          }
        ],
        type: 'json',
        onLoadingStart,
        onLoadingEnd,
      })
    }

    function createRandomString() {
      var text = "";
      var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

      for (var i = 0; i < 5; i++)
        text += possible.charAt(Math.floor(Math.random() * possible.length));

      return text;
    }

    function printImage() {
      prntr('/test-01.jpg', 'image')
    }

    function printImages() {
      prntr({
        printable: [
          '/test-01.jpg',
          '/test-02.jpg'
        ],
        type: 'image',
        onLoadingStart,
        onLoadingEnd,
      })
    }

    function printStyledImages() {
      prntr({
        printable: [
          '/test-01.jpg',
          '/test-02.jpg'
        ],
        type: 'image',
        style: 'img { max-width: 400px; margin: 30px; }',
        onLoadingStart,
        onLoadingEnd,
      })
    }

    function printStyledImagesWithStyleSheet() {
      prntr({
        printable: [
          '/test-01.jpg',
          '/test-02.jpg'
        ],
        type: 'image',
        css: 'test.css',
        onLoadingStart,
        onLoadingEnd,
      })
    }

    function printExternalImages() {
      prntr({
        printable: [
          'https://prntr.crabbly.com/images/print-01-highres.jpg',
          'https://prntr.crabbly.com/images/print-02-highres.jpg',
          'https://prntr.crabbly.com/images/print-03-highres.jpg'
        ],
        type: 'image',
        onLoadingStart,
        onLoadingEnd,
      })
    }
  </script>
</head>

<body>
  <section id="test" class="container">
    <h1>Prntr Test Page</h1>
    <h2>PDF</h2>
    <p>
      <button onClick="printPdf()">
        Print PDF
      </button>
      <button onClick="printPdfBase64();">
        Print base64 PDF
      </button>
    </p>
    <h2>HTML</h2>
    <p>
      <button onClick="printHtml();">
        Print HTML
      </button>
      <button onClick="printHtmlCustomStyle();">
        Print HTML with custom style
      </button>
      <button onClick="printHtmlCss();">
        Print HTML with custom css
      </button>
      <button onClick="printRawHtml();">
        Print Raw HTML
      </button>
    </p>
    <h2>JSON</h2>
    <p>
      <button onClick="prntron();">
        Print JSON
      </button>
      <button onClick="printStyledJson();">
        Print Styled JSON
      </button>
      <button onClick="printNestedJson();">
        Print Nested JSON
      </button>
    </p>
    <h2>Image</h2>
    <p>
      <button onClick="printImage();">
        Print Image
      </button>
      <button onClick="printImages();">
        Print Multiple Images
      </button>
      <button onClick="printStyledImages();">
        Print Multiple Images Passing Custom Style
      </button>
      <button onClick="printStyledImagesWithStyleSheet();">
        Print Multiple Images Passing a Style Sheet
      </button>
      <button onClick="printExternalImages();">
        Print Multiple External Images
      </button>
    </p>
    <div id="form">
      <h2>Form Elements</h2>
      <div>
        <input type="checkbox" /> Checkbox Example
      </div>
      <div>
          <input type="text" value="Styled text input content..." style="color: red; min-width: 300px;" />
      </div>
      <div>
          <textarea>Text area content...</textarea>
      </div>
      <div>
          <canvas id="myCanvas" width="200" height="50"
          style="border:2px solid blue;">
          Your browser does not support the canvas element.
          </canvas>

          <script>
            var canvas = document.getElementById("myCanvas");
            var ctx = canvas.getContext("2d");
            ctx.fillStyle = "#FF0000";
            ctx.fillRect(0,0,150,25);
          </script>
      </div>
      <div>
        <select>
          <option value="super" selected>Super</option>
          <option value="test">Test</option>
          <option value="printjs">Print.js</option>
        </select>
      </div>
    </div>
    <div class="loader"></div>
  </section>
  <script type="module" src="/example/main.js"></script>
</body>

</html>